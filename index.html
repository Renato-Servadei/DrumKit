<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>DrumKit</title>
</head>

<body>
    <div class="keys">
        <div class="key" data-key="KeyA"><kbd>A</kbd><span class="sound">CLAP</span></div>
        <div class="key" data-key="KeyS"><kbd>S</kbd><span class="sound">HI-HAT</span></div>
        <div class="key" data-key="KeyD"><kbd>D</kbd><span class="sound">KICK</span></div>
        <div class="key" data-key="KeyF"><kbd>F</kbd><span class="sound">OPENHAT</span></div>
        <div class="key" data-key="KeyG"><kbd>G</kbd><span class="sound">BONGO</span></div>
        <div class="key" data-key="KeyH"><kbd>H</kbd><span class="sound">RIDE</span></div>
        <div class="key" data-key="KeyJ"><kbd>J</kbd><span class="sound">SNARE</span></div>
        <div class="key" data-key="KeyK"><kbd>K</kbd><span class="sound">TOM</span></div>
        <div class="key" data-key="KeyL"><kbd>L</kbd><span class="sound">COWBELL</span></div>
    </div>

    <audio data-key="KeyA" src="/assets/clap01.wav"></audio>
    <audio data-key="KeyS" src="/assets/chh001hihat.wav"></audio>
    <audio data-key="KeyD" src="/assets/kick_001.wav"></audio>
    <audio data-key="KeyF" src="/assets/openhh01.wav"></audio>
    <audio data-key="KeyG" src="/assets/bongo1.wav"></audio>
    <audio data-key="KeyH" src="/assets/ride01.wav"></audio>
    <audio data-key="KeyJ" src="/assets/snare001.wav"></audio>
    <audio data-key="KeyK" src="/assets/tom01.wav"></audio>
    <audio data-key="KeyL" src="/assets/cowbell1.wav"></audio>

    <script>
        function playSound(e) {
            const audio = document.querySelector(`audio[data-key="${e.code}"]`);
            const key = document.querySelector(`.key[data-key="${e.code}"]`)
            if (!audio) return;
            audio.currentTime = 0;
            audio.play();
            key.classList.add('playing');
        }

        function removeTransition(e) {
            //console.log(e)
            if (e.propertyName !== 'transform') return;
            this.classList.remove('playing');
        }

        const keys = document.querySelectorAll('.key');
        keys.forEach(key => key.addEventListener('transitionend', removeTransition));
        window.addEventListener('keydown', playSound);
    </script>
</body>

</html>